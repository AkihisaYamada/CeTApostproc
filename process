#!/bin/bash

prooffile=`mktemp`
claimfile=`mktemp`
outfile=`mktemp`
errfile=`mktemp`

result=`sed 1q "$1"`
sed -n '1!p' "$1" > "$prooffile"

if [ "$result" = "YES" ]; then
	claim='<terminating/>'
elif [ "$result" = "NO" ]; then
	claim='<nonterminating/>'
else
	claim=
fi

if [ "$claim" != "" ]; then
	echo $claim > "$claimfile"
	./ceta "$2" "$claimfile" "$prooffile" > "$outfile" 2> "$errfile"
	cert=`cat "$outfile"`
	echo starexec-result=$cert $result
	echo certification-result=$cert
       	echo certification-err=`cat "$errfile"`
else
	echo starexec-result=$result
fi

rm "$prooffile" "$claimfile" "$outfile" "$errfile"
